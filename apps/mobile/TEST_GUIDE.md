# Mobile 测试指南

## 测试页面功能

这个测试页面用于验证admin端创建的章节和段落内容是否能在mobile端正常显示。

### 功能特性

1. **章节列表显示**
   - 显示所有已发布的章节
   - 显示章节标题、描述、段落数量、预估阅读时间
   - 显示章节访问权限状态（免费/需要升级）
   - 显示可访问的段落数量

2. **章节内容查看**
   - 点击章节可查看详细内容
   - 显示章节下的所有段落
   - 段落内容支持HTML渲染
   - 显示段落图片（如果有）
   - 显示段落统计信息（字数、阅读时间）

3. **用户权限测试**
   - 支持切换用户类型：FREE / TRIAL / MEMBER
   - 支持切换语言：中文 / 英文
   - 支持切换省份：ON / BC / AB
   - 实时刷新数据以测试不同权限下的内容显示

### 使用方法

1. **启动应用**
   ```bash
   cd apps/mobile
   pnpm dev
   ```

2. **访问测试页面**
   - 在模拟器/设备上打开应用
   - 点击"测试手册功能"按钮
   - 进入测试页面

3. **测试不同场景**
   - 切换用户类型测试权限控制
   - 切换语言测试多语言支持
   - 切换省份测试地区内容
   - 点击章节查看内容显示
   - 使用刷新按钮重新加载数据

### 测试要点

1. **权限控制**
   - FREE用户只能看到免费内容
   - TRIAL用户可以看到试用内容
   - MEMBER用户可以看到所有内容

2. **内容显示**
   - 章节列表是否正确显示
   - 段落内容是否正确渲染
   - 图片是否正确显示
   - HTML标签是否正确处理

3. **多语言支持**
   - 中文内容是否正确显示
   - 英文内容是否正确显示
   - 语言切换是否生效

4. **数据加载**
   - 加载状态是否正确显示
   - 错误处理是否正常工作
   - 网络请求是否成功

### API端点

测试页面使用以下API端点：

- `GET /api/mobile/chapters` - 获取章节列表
- `GET /api/mobile/content/[id]` - 获取章节内容

### 注意事项

1. 确保admin端服务正在运行（默认端口3000）
2. 确保数据库中有测试数据
3. 检查网络连接和API端点可访问性
4. 如果遇到问题，查看控制台错误信息

### 故障排除

1. **无法加载章节列表**
   - 检查admin服务是否运行
   - 检查API端点是否正确
   - 检查网络连接

2. **内容显示异常**
   - 检查HTML内容格式
   - 检查图片URL是否有效
   - 检查权限设置是否正确

3. **语言切换不生效**
   - 检查数据库中的多语言内容
   - 检查API响应中的语言字段
   - 检查前端状态管理 