# æ•°æ®åº“åˆå§‹åŒ–æŒ‡å—

ğŸ—„ï¸ åŠ æ‹¿å¤§é©¾è€ƒAppæ•°æ®åº“è®¾ç½®å’Œåˆå§‹åŒ–è¯´æ˜

## ğŸ“‹ å‰ç½®è¦æ±‚

1. **Vercelæ•°æ®åº“æœåŠ¡** - å·²é€šè¿‡Vercelå¼€å¯PostgreSQLæœåŠ¡
2. **ç¯å¢ƒå˜é‡é…ç½®** - åœ¨adminé¡¹ç›®ä¸­é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯

## ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®

åœ¨ `apps/admin/.env.local` æ–‡ä»¶ä¸­é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```bash
# æ•°æ®åº“è¿æ¥ (ä»Vercelè·å–)
DATABASE_URL="postgresql://user:password@host:5432/dbname?sslmode=require"

# JWTå¯†é’¥ (ç”¨äºç”¨æˆ·è®¤è¯)
JWT_SECRET="your-super-secret-jwt-key-here"

# Vercel Blobå­˜å‚¨ (ç”¨äºå›¾ç‰‡ä¸Šä¼ )
BLOB_READ_WRITE_TOKEN="your-vercel-blob-token"
```

### è·å–Vercelæ•°æ®åº“è¿æ¥ä¿¡æ¯

1. ç™»å½• [Vercel Dashboard](https://vercel.com/dashboard)
2. è¿›å…¥ä½ çš„é¡¹ç›®
3. ç‚¹å‡» "Storage" æ ‡ç­¾
4. é€‰æ‹© "Postgres" æ•°æ®åº“
5. ç‚¹å‡» "Connect" è·å–è¿æ¥å­—ç¬¦ä¸²

## ğŸš€ æ•°æ®åº“åˆå§‹åŒ–

### 1. æ£€æŸ¥æ•°æ®åº“è¿æ¥

```bash
# æ£€æŸ¥æ•°æ®åº“è¿æ¥æ˜¯å¦æ­£å¸¸
pnpm db:check
```

### 2. ç”Ÿæˆæ•°æ®åº“è¿ç§»æ–‡ä»¶

```bash
# æ ¹æ®schemaç”Ÿæˆè¿ç§»æ–‡ä»¶
pnpm db:generate
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# å®Œæ•´åˆå§‹åŒ– (è¿ç§» + ç§å­æ•°æ®)
pnpm db:init

# ä»…è¿è¡Œè¿ç§» (ä¸æ’å…¥ç§å­æ•°æ®)
pnpm db:init:migrate-only

# ä»…æ’å…¥ç§å­æ•°æ®
pnpm db:seed
```

## ğŸ“Š åˆå§‹åŒ–å†…å®¹

### æ•°æ®åº“è¡¨ç»“æ„
- âœ… **ç”¨æˆ·ç³»ç»Ÿ**: `users`, `verification_codes`
- âœ… **æ‰‹å†Œç³»ç»Ÿ**: `handbook_chapters`, `handbook_sections`, `handbook_images`
- âœ… **æµ‹éªŒç³»ç»Ÿ**: `questions`, `question_options`, `quiz_sessions`, `user_answers`
- âœ… **è¿›åº¦ç³»ç»Ÿ**: `chapter_progress`, `reading_records`, `wrong_questions`, `bookmarks`
- âœ… **ç³»ç»Ÿç®¡ç†**: `app_configs`, `notifications`, `feedback`

### ç§å­æ•°æ®
- ğŸ‘¥ **ç¤ºä¾‹ç”¨æˆ·**: ç®¡ç†å‘˜ã€æ™®é€šç”¨æˆ·ã€è¯•ç”¨ç”¨æˆ·
- ğŸ“š **æ‰‹å†Œå†…å®¹**: 3ä¸ªç« èŠ‚ï¼ŒåŒ…å«è¯¦ç»†çš„å­¦ä¹ å†…å®¹
- ğŸ§  **æµ‹éªŒé¢˜ç›®**: åŸºç¡€é¢˜ç›®å’Œé€‰é¡¹
- âš™ï¸ **åº”ç”¨é…ç½®**: ç³»ç»Ÿå‚æ•°å’Œè®¾ç½®
- ğŸ« **é‚€è¯·ç **: è¯•ç”¨é‚€è¯·ç 

## ğŸ” æ•°æ®åº“ç®¡ç†

### æŸ¥çœ‹æ•°æ®åº“

```bash
# å¯åŠ¨Drizzle Studio (æ•°æ®åº“ç®¡ç†ç•Œé¢)
pnpm db:studio
```

è®¿é—®: http://localhost:4983

### å¸¸ç”¨æ“ä½œ

```bash
# æ£€æŸ¥è¿æ¥
pnpm db:check

# ç”Ÿæˆè¿ç§»
pnpm db:generate

# æŸ¥çœ‹æ•°æ®åº“
pnpm db:studio

# é‡æ–°åˆå§‹åŒ– (è°¨æ…ä½¿ç”¨)
pnpm db:init --force-seed
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯

#### 1. è¿æ¥å¤±è´¥
```
âŒ æ•°æ®åº“è¿æ¥å¤±è´¥: connection refused
```
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ `DATABASE_URL` æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿æ•°æ®åº“æœåŠ¡æ­£åœ¨è¿è¡Œ

#### 2. æƒé™é”™è¯¯
```
âŒ æ•°æ®åº“è¿æ¥å¤±è´¥: permission denied
```
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·æƒé™ï¼Œç¡®ä¿æœ‰åˆ›å»ºè¡¨çš„æƒé™

#### 3. SSLé”™è¯¯
```
âŒ æ•°æ®åº“è¿æ¥å¤±è´¥: SSL connection required
```
**è§£å†³æ–¹æ¡ˆ**: åœ¨è¿æ¥å­—ç¬¦ä¸²ä¸­æ·»åŠ  `?sslmode=require`

### é‡ç½®æ•°æ®åº“

å¦‚æœéœ€è¦å®Œå…¨é‡ç½®æ•°æ®åº“ï¼š

```bash
# 1. åˆ é™¤æ‰€æœ‰è¡¨ (è°¨æ…æ“ä½œ)
# åœ¨Drizzle Studioä¸­æ‰‹åŠ¨åˆ é™¤ï¼Œæˆ–ä½¿ç”¨æ•°æ®åº“ç®¡ç†å·¥å…·

# 2. é‡æ–°åˆå§‹åŒ–
pnpm db:init
```

## ğŸ“š ä¸‹ä¸€æ­¥

æ•°æ®åº“åˆå§‹åŒ–å®Œæˆåï¼š

1. **å¯åŠ¨Adminåº”ç”¨**: `pnpm admin`
2. **è®¿é—®ç®¡ç†ç•Œé¢**: http://localhost:3000
3. **å¼€å§‹å¼€å‘ç§»åŠ¨ç«¯**: `pnpm mobile`

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Admin APIæ–‡æ¡£](./apps/admin/README.md)
- [æ•°æ®åº“Schemaæ–‡æ¡£](./packages/database/README.md)
- [å…±äº«ç±»å‹æ–‡æ¡£](./packages/shared/README.md) 